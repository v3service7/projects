<app-headerowner></app-headerowner>
<div class="rightMenu col-lg-9 col-md-9 col-sm-9 custom_chng_menu">
	<alert></alert>  
<div class="screen-sidebar js-sidebar">
<h4  *ngIf="currentOpen ==  'editgroup'">Edit Group</h4>
<div class="settings-content custom_settings_content" *ngIf="currentOpen ==  'editgroup'">
    <div class="comp-edit-area js-edit-area">
        <form [formGroup]="editableDetail" (ngSubmit)="groupDetailEditUpdate()">  
        <div class="comp-edit-zone comp-edit-composed js-edit-zone">            
            <div class="comp-edit-field comp-medium-field ng-binding">Name</div> 
            <input type="hidden" formControlName="_id" />           
            <input type="text" class="comp-medium-field form-control js-edit-name has-success" name="name" data-completed="1" placeholder="Group Name" data-rule="notEmpty" formControlName="name">
            <div class="clearfix"></div>            
        </div>
        <div class="comp-button-zone">
            <button class="btn btn-plain pull-left js-cancel ng-binding" (click)="clearCancel()">Cancel</button>
            <button type="submit" class="btn btn-action pull-right js-save ng-binding" 
            [disabled]="!editableDetail.valid">Update</button>
        </div>
        </form>
    </div>
</div>


<h4  *ngIf="currentOpen ==  'choice'">Add Choice for <code>{{currentChoice}} </code></h4>
<div class="settings-content custom_settings_content"  *ngIf="currentOpen ==  'choice'">
    <div class="comp-edit-area js-edit-area">
      <form [formGroup]="choiceAddModel" (ngSubmit)="choiceDetailadd()"> 
        <input type="hidden" formControlName="_id">  
        <div class="comp-edit-zone comp-edit-composed js-edit-zone">

            <div class="comp-edit-field comp-medium-field ng-binding">Name</div>                       
            <input type="text" class="comp-medium-field form-control js-edit-name has-success" name="name" data-completed="1" placeholder="Choice Name" data-rule="notEmpty" formControlName="name">
            <div class="clearfix"></div>            
        </div>
         <div class="comp-edit-zone comp-edit-composed js-edit-zone">            
            <div class="comp-edit-field comp-medium-field ng-binding">Price</div>                       
            <input type="text" class="comp-medium-field form-control js-edit-name has-success" name="name" data-completed="1" placeholder="Price Name" data-rule="notEmpty" formControlName="price">
            <div class="clearfix"></div>            
        </div>
        <div class="comp-button-zone">
            <button class="btn btn-plain pull-left js-cancel ng-binding" (click)="clearCancel()">Cancel</button>
            <button type="submit" class="btn btn-action pull-right js-save ng-binding" 
            [disabled]="!choiceAddModel.valid">Add</button>
        </div>
     </form>
    </div>
</div>



<h4 *ngIf="currentOpen ==  'editchoice'">Edit Choice</h4>
<div class="settings-content custom_settings_content" *ngIf="currentOpen ==  'editchoice'">
    <div class="comp-edit-area js-edit-area">
        <form [formGroup]="editableChoiceDetail" (ngSubmit)="editChoiceUpdate()">  
        <div class="comp-edit-zone comp-edit-composed js-edit-zone">            
            <div class="comp-edit-field comp-medium-field ng-binding">Name</div> 
            <input type="hidden" formControlName="_id" />  
            <input type="hidden" formControlName="id" />          
            <input type="text" class="comp-medium-field form-control js-edit-name has-success" name="name" data-completed="1" placeholder="Group Name" data-rule="notEmpty" formControlName="name">
            <div class="clearfix"></div>            
        </div>
        <div class="comp-edit-zone comp-edit-composed js-edit-zone">            
            <div class="comp-edit-field comp-medium-field ng-binding">Price</div>                     
            <input type="text" class="comp-medium-field form-control js-edit-name has-success" name="name" data-completed="1" placeholder="Price Name" data-rule="notEmpty" formControlName="price">
            <div class="clearfix"></div>            
        </div>
        <div class="comp-button-zone">
            <button class="btn btn-plain pull-left js-cancel ng-binding" (click)="clearEdit()">Cancel</button>
            <button type="submit" class="btn btn-action pull-right js-save ng-binding" 
            [disabled]="!editableChoiceDetail.valid">Update</button>
        </div>
        </form>
    </div>
</div>

<div class="separator"></div>

    <div class="js-zones">
             
        <div spellcheck="false" class="comp-alt-panel-container js-area-prototype js-container" data-index="1" *ngFor="let group of groups">
            <div class="zoneData" data-type="true" data-radius="200" data-color="#905dba"></div>

            <div class="comp-alt-panel js-area">
                <div class="comp-area-name js-info-name pull-left ng-binding"><a class="colls" data-toggle="collapse" data-parent="#accordion" href = "#gr{{group._id}}"><span class="icon-collapse"></span>&nbsp;&nbsp;</a>{{group.name}}</div>
                <div class="comp-action-zone js-actions">                
                <a title="Edit" (click)="groupDetailEdit(group._id)">
                <span class="icon-menu-edit js-edit"></span>
                </a>
                &nbsp;&nbsp;
                <a title="Delete" (click)="groupDetailRemove(group._id)"><span class="icon-menu-remove js-remove"></span></a>
                </div>
            </div>

    <div id="gr{{group._id}}" class = "panel-collapse collapse">
    <div class="comp-area-attribute" *ngFor="let addon of group.subaddon; let i = index; ">
        <div class="comp-area-name js-info-name pull-left ng-binding"><span>{{addon.name}}</span></div>
        <div class="comp-action-zone js-actions makeopacity">
       <div class="pull-left">{{addon.price}}&nbsp;&nbsp;</div>

       <a href="javascript:void(0);" (click)="editchoice(group._id,addon._id)" title="Edit">
       <span class="icon-menu-edit js-edit"></span>
       </a>&nbsp;&nbsp;

       <a href="javascript:void(0);" title="Delete" (click)="removechoice(i,group._id)">
       <span class="icon-menu-remove js-remove"></span>
       </a>
     
    </div>
   </div>

   <div><button class="btn btn-plain btn-sidebar pull-left js-add-group ng-binding" (click)="addChoic(group._id,group.name)">Add choice</button></div>
</div>
</div>
    </div>
    <div class="separator"></div>
    <div class="collapse" id="collapseExample" *ngIf="currentOpen ==  'group'" [ngStyle]="addgroup">
        <form [formGroup]="groupAddModel" (ngSubmit)="groupDetailAdd()">            
            <div class="comp-edit-area js-edit-area">
                <div class="comp-edit-zone comp-edit-composed js-edit-zone">
                    <div class="btn-group comp-type-picker comp-mandatory-selector js-edit-mandatory" data-toggle="buttons">
                    </div>
                    <div class="comp-edit-field comp-medium-field ng-binding">Name</div>
                    <input type="text" class="comp-medium-field form-control js-edit-name has-success"  placeholder="Group Name" formControlName="name">
                    <div class="clearfix"></div>
                </div>
                <div class="comp-button-zone">
                    <button id="btncncl" type="button" (click)="clearCancel()" class="btn btn-plain pull-left js-cancel" cancelAll="">Cancel</button>
                    <input type="submit" class="btn btn-action pull-right js-save ng-binding" [disabled]="!groupAddModel.valid"  value="Save">
                </div>
            </div>
        </form>
    </div>
    <button id="btnadd" (click)="addAnothergroup()" class="btn btn-plain btn-sidebar pull-left js-add-zone ng-binding">Add Group?</button>
    </div>

	<div class="menuSetup" id="Menu11" style="box-shadow: 0px 0px 0px;">
        <div class="row">
            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                <a class="btn btn-primary" [routerLink]="['/owner/menu-add']" style="margin-top: 20px;">Menu Add</a>
            </div>
  </div>

<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog"> 
      <div class="modal-content">
       <form [formGroup]="multisizeAddModel" (ngSubmit)="multisizeAddUpdate()">
        <input type="hidden" formControlName="sid" name="sid"/>
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Add MultiSize</h4>
        </div>
        <div class="modal-body">       
         <div class="form-group">
         <label>Size</label>        
         <input type="text" formControlName="sizename" class="form-control" placeholder="Size">
         </div>
         <div class="form-group">
         <label>Price</label>
         <input type="text" formControlName="sizeprice" class="form-control" placeholder="Price">
         </div>
        </div>
        <div class="modal-footer">
        <input type="submit" class="btn btn-default" [disabled]="!multisizeAddModel.valid" value="Submit">
        </div>
        </form>
      </div>     
    </div>
</div>

<div class="modal fade" id="myeditModal" role="dialog">
    <div class="modal-dialog"> 
      <div class="modal-content">
       <form [formGroup]="multisizeEditAddModel" (ngSubmit)="multisizeEditAddUpdate()">
        <input type="hidden" formControlName="id"/>
        <input type="hidden" formControlName="_id"/>
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Edit SubMenu Mutisize</h4>
        </div>
        <div class="modal-body">       
         <div class="form-group">
         <label>Size</label>        
         <input type="text" formControlName="size" class="form-control" placeholder="Size">
         </div>
         <div class="form-group">
         <label>Price</label>
         <input type="text" formControlName="price" class="form-control" placeholder="Price">
         </div>                
        </div>
        <div class="modal-footer">
        <input type="submit" class="btn btn-default" [disabled]="!multisizeEditAddModel.valid" value="Submit">
        </div>
        </form>
      </div>     
    </div>
</div>

<div class="modal fade" id="mymenuModal" role="dialog">
    <div class="modal-dialog"> 
      <div class="modal-content">
       <form [formGroup]="menuImageAddModel" (ngSubmit)="updateMenuImage()">
        <input type="hidden" formControlName="_id"/>        
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"> Upload Image </h4>
        </div>
        <div class="modal-body">
         <div class="form-group">
         <label>Menu Image</label>
          <input type="file" title="your text" class="form-control" name="single" value="df" ng2FileSelect [uploader]="uploader" />
         </div>                
        </div>
        <div class="modal-footer">
        <input type="submit" class="btn btn-default" value="Submit">
        </div>
        </form>
      </div>     
    </div>
</div>

<div class="modal fade" id="mySubMenuModal" role="dialog">
    <div class="modal-dialog"> 
      <div class="modal-content">
       <form [formGroup]="smenuImageAddModel" (ngSubmit)="updateSubMenuImage()">
         <input type="hidden" formControlName="_id"/>  
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"> Upload Image </h4>
        </div>
        <div class="modal-body">
         <div class="form-group">
         <label>Menu Image</label>
          <input type="file" class="form-control" name="single" value="df" ng2FileSelect [uploader]="uploader" />
         </div>                
        </div>
        <div class="modal-footer">
        <input type="submit" class="btn btn-default" value="Submit">
        </div>
        </form>
      </div>     
    </div>
</div>

        <div *ngFor="let user of users" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
            <div class="mainMenuItem" >
                <div class="itemImage col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <img  (click)="passId(user._id)" data-toggle="modal" data-target="#mymenuModal" src="{{imageUrl}}{{user.image}}" class="img-responsive custom_img_size">
                </div>
                <div class="itemDesc col-lg-8 col-md-8 col-sm-8 col-xs-8 custom_menu_color"> {{user.name}}</div>
                <div class="icons col-lg-2 col-md-2 col-sm-2 col-xs-2" style="">
                    <a [routerLink]="['/owner/menu-edit/',user._id]"><i class="fa fa-pencil" aria-hidden="true"></i></a>
                    <a (click)="deleteUser(user._id)" href="javascript:void(0);"><i class="fa fa-trash" aria-hidden="true"></i></a>
                    <a [routerLink]="['/owner/item-add/',user._id]" title="Add Item"><i class="fa fa-plus" aria-hidden="true"></i></a>
                </div>
            </div>
            <div   *ngFor="let item of items">
                <div *ngIf="item.menuId == user._id" class="subMenuItem ">
                   <div class="margin-for-addon">
                    <div class="itemImage col-lg-2 col-md-2 col-sm-2 col-xs-2">
                        <img (click)="passub(item._id)" data-toggle="modal" data-target="#mySubMenuModal"  src="{{imageUrl}}{{item.image}}" class="img-responsive">                        
                    </div>
                    <div class="itemDesc col-lg-8 col-md-8 col-sm-8 col-xs-8"> {{item.name}}
                    <span class="custom_sub_price" *ngIf="item.multisize.length < 1"><code> {{item.price}} CZK</code></span>

                    <div class="row" style="margin-top: 10px;">
                      <small *ngFor="let grop of groups">
                        <span *ngFor="let itemx of item.options; let i = index;">
                        <i *ngIf="grop._id == item.options[i]"> 
                        <button style="padding: 4px;" class="btn btn-default"> {{grop.name}} </button>
                        </i>
                        </span>
                      </small>
                    </div>
                     
                     </div>

                    <div class="icons col-lg-2 col-md-2 col-sm-2 col-xs-2" style="">
                        <a [routerLink]="['/owner/item-edit/',item._id]"><i class="fa fa-pencil" aria-hidden="true"></i></a>
                        <a (click)="deleteItem(item._id)" href="javascript:void(0);"><i class="fa fa-trash" aria-hidden="true"></i></a>                        
                    </div>
                    </div> 
                   <br/>
                   <div class="custom_for_ms">
                     <button type="button" (click)="addMultisizeAddOn(item._id)" class="btn btn-success btn-multisize" data-toggle="modal" data-target="#myModal">Add Multisize</button>
                   </div>                                       
                        <div  *ngFor="let itemsp of item.multisize; let i = index" class="js-size-prototype comp-size clearfix is-new js-container js-size ui-droppable">
                            <div class="pull-left comp-info-size-name js-info-size-name ">{{itemsp.size}}</div>
                            <div class="pull-right comp-info-size-price">
                                <div class="pull-left js-info-size-price">{{itemsp.price}}</div>
                                <div class="pull-left comp-info-size-currency js-info-currency">CZK &nbsp;</div>
                               
                                <a href="javascript:void(0);" title="Delete" (click)="removeSubmenuAddOn(i,item._id)"><span class="icon-menu-remove js-remove" data-original-title="" title=""></span></a>

                                <a href="javascript:void(0);" title="Edit" (click)="editSubmenuAddOn(itemsp._id,item._id)" data-toggle="modal" data-target="#myeditModal"><span class="icon-menu-edit js-edit" data-original-title="" title=""></span></a>

                                </div>
                                <div class="icon-default js-default-size-info is-hidden" data-original-title="" title="">                                    
                         </div>                        
                    </div>                   
                </div>
                
            </div>
        </div>

        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3"></div>
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
               
            </div>
        </div>
    </div>

</div>